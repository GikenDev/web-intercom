<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <script src="/static/raw_mic_capture.js"></script>
    <script>
      /**
       * Test for `RawMicCaptureProcessor.js`
       *
       * Note:
       *   This module using `audioWorklet.addModule`
       *   So it requires HTTP connection.
       *
       * Test steps:
       *   1. Execute `main.py` (in same directory) with python3 interpreter
       *   2. Access to `http://localhost:8000/raw_mic_capture` with browser
       *   3. Open JavaScript console
       *   4. Click test buttons
       *   5. Check console output
       *
       * @author aKuad
       */

      function Test_StartAudioCapture() {
        console.log("-- Test_StartAudioCapture");
        raw_mic_capture(pcm => {
          console.log(pcm);
        }, 0.1, "/static/RawMicCaptureProcessor.js");
        console.log("-- CHECK - Is PCM logged at each 0.1 second?");
      }
    </script>
  </head>

  <body>
    <button onclick="Test_StartAudioCapture()">Test_StartAudioCapture</button>
  </body>
</html>
